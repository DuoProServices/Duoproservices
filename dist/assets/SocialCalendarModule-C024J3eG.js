import{j as e}from"./index-B2LFkxWB.js";import{r as c}from"./vendor-Cq0Q7ve9.js";import{af as W,al as Y,ag as q,am as B,c as S,F as z,ad as X,aj as Z,Z as _,C as G,an as H,ac as K,x as Q,X as ee,a9 as te,t as g}from"./ui-VDfBvwns.js";import"./supabase-C9VFef86.js";const j=[{value:"instagram",label:"Instagram",icon:W,color:"text-pink-600",bgColor:"bg-pink-50"},{value:"facebook",label:"Facebook",icon:Y,color:"text-blue-600",bgColor:"bg-blue-50"},{value:"linkedin",label:"LinkedIn",icon:q,color:"text-blue-700",bgColor:"bg-blue-50"},{value:"twitter",label:"Twitter",icon:B,color:"text-sky-500",bgColor:"bg-sky-50"}],se={scheduled:"bg-blue-100 text-blue-800",published:"bg-green-100 text-green-800",draft:"bg-gray-100 text-gray-800"};function ce(){const[l,m]=c.useState([]),[T,C]=c.useState(!1),[o,N]=c.useState(null),[i,k]=c.useState(new Date),[p,D]=c.useState("month"),[ae,P]=c.useState(!0),[a,n]=c.useState({date:"",time:"",platform:"instagram",content:"",imageUrl:"",status:"scheduled"});c.useEffect(()=>{M()},[]);const M=async()=>{var t;P(!0);try{console.log("ðŸ“¦ [SocialCalendar] Loading posts from localStorage...");const s=localStorage.getItem("admin-hub-social-posts");if(s){const r=JSON.parse(s);m(r.posts||[]),console.log(`âœ… [SocialCalendar] Loaded ${((t=r.posts)==null?void 0:t.length)||0} posts from localStorage`)}else console.log("ðŸ“­ [SocialCalendar] No posts found in localStorage"),m([])}catch(s){console.error("Error loading posts:",s),m([])}finally{P(!1)}},y=(t,s)=>{t?(N(t),n({date:t.date,time:t.time,platform:t.platform,content:t.content,imageUrl:t.imageUrl||"",status:t.status})):(N(null),n({date:s||"",time:"09:00",platform:"instagram",content:"",imageUrl:"",status:"scheduled"})),C(!0)},v=()=>{C(!1),N(null),n({date:"",time:"",platform:"instagram",content:"",imageUrl:"",status:"scheduled"})},F=async()=>{if(console.log("ðŸ’¾ Starting save post...",a),!a.date||!a.time||!a.content){console.error("âŒ Missing required fields:",{date:a.date,time:a.time,content:a.content}),g.error("âš ï¸ Please fill in all required fields (date, time, content)");return}const t={id:(o==null?void 0:o.id)||`post-${Date.now()}`,...a,createdAt:(o==null?void 0:o.createdAt)||new Date().toISOString()};console.log("ðŸ“± Post object created:",t);try{let s;o?(s=l.map(r=>r.id===o.id?t:r),g.success("âœ… Post updated successfully!")):(s=[...l,t],g.success("âœ… Post created successfully!")),localStorage.setItem("admin-hub-social-posts",JSON.stringify({posts:s})),console.log("âœ… Saved to localStorage"),m(s),v()}catch(s){console.error("âŒ Error saving post:",s),g.error(`Error: ${s instanceof Error?s.message:"Unknown error"}`)}},U=async t=>{if(confirm("Are you sure you want to delete this post?"))try{const s=l.filter(r=>r.id!==t);m(s),localStorage.setItem("admin-hub-social-posts",JSON.stringify({posts:s})),console.log("âœ… Deleted from localStorage"),g.success("âœ… Post deleted successfully")}catch(s){console.error("Error deleting post:",s),g.error("Failed to delete post")}},L=t=>{const s=t.getFullYear(),r=t.getMonth(),x=new Date(s,r,1),h=new Date(s,r+1,0).getDate(),w=x.getDay(),b=[];for(let d=0;d<w;d++)b.push(null);for(let d=1;d<=h;d++)b.push(new Date(s,r,d));return b},E=t=>{if(!t)return[];const s=t.toISOString().split("T")[0];return l.filter(r=>r.date===s)},O=()=>{k(new Date(i.getFullYear(),i.getMonth()-1,1))},A=()=>{k(new Date(i.getFullYear(),i.getMonth()+1,1))},$=t=>j.find(s=>s.value===t)||j[0],f={total:l.length,scheduled:l.filter(t=>t.status==="scheduled").length,published:l.filter(t=>t.status==="published").length,draft:l.filter(t=>t.status==="draft").length},R=j.map(t=>({...t,count:l.filter(s=>s.platform===t.value).length})),J=L(i),V=i.toLocaleDateString("en-CA",{month:"long",year:"numeric"}),I=l.filter(t=>t.status==="scheduled").sort((t,s)=>{const r=new Date(`${t.date}T${t.time}`),x=new Date(`${s.date}T${s.time}`);return r.getTime()-x.getTime()}).slice(0,5);return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-white p-4 rounded-lg border border-gray-200",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total Posts"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 mt-1",children:f.total})]}),e.jsxs("div",{className:"bg-white p-4 rounded-lg border border-gray-200",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Scheduled"}),e.jsx("p",{className:"text-2xl font-bold text-blue-600 mt-1",children:f.scheduled})]}),e.jsxs("div",{className:"bg-white p-4 rounded-lg border border-gray-200",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Published"}),e.jsx("p",{className:"text-2xl font-bold text-green-600 mt-1",children:f.published})]}),e.jsxs("div",{className:"bg-white p-4 rounded-lg border border-gray-200",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Drafts"}),e.jsx("p",{className:"text-2xl font-bold text-gray-600 mt-1",children:f.draft})]})]}),e.jsxs("div",{className:"bg-white p-6 rounded-lg border border-gray-200",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Posts by Platform"}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:R.map(t=>{const s=t.icon;return e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`p-3 ${t.bgColor} rounded-lg`,children:e.jsx(s,{className:`w-5 h-5 ${t.color}`})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:t.label}),e.jsx("p",{className:"text-xl font-bold text-gray-900",children:t.count})]})]},t.value)})})]}),e.jsx("div",{className:"bg-white p-6 rounded-lg border border-gray-200",children:e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("button",{onClick:()=>D("month"),className:`px-4 py-2 rounded-lg transition-colors ${p==="month"?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[e.jsx(S,{className:"w-4 h-4 inline mr-2"}),"Calendar View"]}),e.jsxs("button",{onClick:()=>D("list"),className:`px-4 py-2 rounded-lg transition-colors ${p==="list"?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[e.jsx(z,{className:"w-4 h-4 inline mr-2"}),"List View"]})]}),e.jsxs("button",{onClick:()=>y(),className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[e.jsx(X,{className:"w-5 h-5"}),"New Post"]})]})}),p==="month"&&e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 overflow-hidden",children:[e.jsxs("div",{className:"bg-gray-50 px-6 py-4 border-b border-gray-200 flex items-center justify-between",children:[e.jsx("button",{onClick:O,className:"p-2 hover:bg-gray-200 rounded-lg transition-colors",children:e.jsx(Z,{className:"w-5 h-5"})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:V}),e.jsx("button",{onClick:A,className:"p-2 hover:bg-gray-200 rounded-lg transition-colors",children:e.jsx(_,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"p-6",children:[e.jsx("div",{className:"grid grid-cols-7 gap-2 mb-2",children:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map(t=>e.jsx("div",{className:"text-center text-sm font-semibold text-gray-600 py-2",children:t},t))}),e.jsx("div",{className:"grid grid-cols-7 gap-2",children:J.map((t,s)=>{const r=E(t),x=t&&t.toDateString()===new Date().toDateString();return e.jsx("div",{className:`min-h-24 border border-gray-200 rounded-lg p-2 ${t?"bg-white hover:bg-gray-50 cursor-pointer":"bg-gray-50"} ${x?"border-blue-600 border-2":""}`,onClick:()=>t&&y(void 0,t.toISOString().split("T")[0]),children:t&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"text-sm font-semibold text-gray-900 mb-1",children:t.getDate()}),e.jsxs("div",{className:"space-y-1",children:[r.slice(0,2).map(u=>{const h=$(u.platform),w=h.icon;return e.jsxs("div",{className:`text-xs px-2 py-1 ${h.bgColor} ${h.color} rounded flex items-center gap-1 truncate`,onClick:b=>{b.stopPropagation(),y(u)},children:[e.jsx(w,{className:"w-3 h-3 flex-shrink-0"}),e.jsx("span",{className:"truncate",children:u.time})]},u.id)}),r.length>2&&e.jsxs("div",{className:"text-xs text-gray-500 px-2",children:["+",r.length-2," more"]})]})]})},s)})})]})]}),p==="list"&&e.jsx("div",{className:"space-y-4",children:I.length===0?e.jsxs("div",{className:"bg-white p-12 rounded-lg border border-gray-200 text-center",children:[e.jsx(S,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"No scheduled posts"})]}):I.map(t=>{const s=$(t.platform),r=s.icon;return e.jsx("div",{className:"bg-white p-6 rounded-lg border border-gray-200 hover:border-blue-300 transition-colors",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("div",{className:`p-2 ${s.bgColor} rounded-lg`,children:e.jsx(r,{className:`w-5 h-5 ${s.color}`})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-gray-900",children:s.label}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[e.jsx(S,{className:"w-4 h-4"}),new Date(t.date).toLocaleDateString("en-CA",{month:"short",day:"numeric",year:"numeric"}),e.jsx(G,{className:"w-4 h-4 ml-2"}),t.time]})]}),e.jsx("span",{className:`px-2.5 py-0.5 rounded-full text-xs font-medium ${se[t.status]}`,children:t.status.charAt(0).toUpperCase()+t.status.slice(1)})]}),e.jsx("p",{className:"text-gray-700 mb-3",children:t.content}),t.imageUrl&&e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[e.jsx(H,{className:"w-4 h-4"}),e.jsx("span",{children:"Image attached"})]})]}),e.jsxs("div",{className:"flex items-center gap-2 ml-4",children:[e.jsx("button",{onClick:()=>y(t),className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:"Edit post",children:e.jsx(K,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>U(t.id),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Delete post",children:e.jsx(Q,{className:"w-4 h-4"})})]})]})},t.id)})}),T&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"sticky top-0 bg-white border-b border-gray-200 px-6 py-4 flex items-center justify-between",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:o?"Edit Post":"New Post"}),e.jsx("button",{onClick:v,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(ee,{className:"w-5 h-5 text-gray-600"})})]}),e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Platform *"}),e.jsx("div",{className:"grid grid-cols-2 gap-3",children:j.map(t=>{const s=t.icon;return e.jsxs("button",{type:"button",onClick:()=>n({...a,platform:t.value}),className:`flex items-center gap-3 px-4 py-3 border-2 rounded-lg transition-all ${a.platform===t.value?`${t.bgColor} border-current ${t.color}`:"border-gray-200 hover:border-gray-300"}`,children:[e.jsx(s,{className:`w-5 h-5 ${a.platform===t.value?t.color:"text-gray-600"}`}),e.jsx("span",{className:"font-medium",children:t.label})]},t.value)})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Date *"}),e.jsx("input",{type:"date",value:a.date,onChange:t=>n({...a,date:t.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-600 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Time *"}),e.jsx("input",{type:"time",value:a.time,onChange:t=>n({...a,time:t.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-600 focus:border-transparent"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Content *"}),e.jsx("textarea",{value:a.content,onChange:t=>n({...a,content:t.target.value}),rows:5,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-600 focus:border-transparent",placeholder:"Write your post content here..."}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[a.content.length," characters"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Image URL (optional)"}),e.jsx("input",{type:"url",value:a.imageUrl,onChange:t=>n({...a,imageUrl:t.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-600 focus:border-transparent",placeholder:"https://example.com/image.jpg"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status"}),e.jsxs("select",{value:a.status,onChange:t=>n({...a,status:t.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-600 focus:border-transparent",children:[e.jsx("option",{value:"scheduled",children:"Scheduled"}),e.jsx("option",{value:"draft",children:"Draft"}),e.jsx("option",{value:"published",children:"Published"})]})]})]}),e.jsxs("div",{className:"sticky bottom-0 bg-gray-50 border-t border-gray-200 px-6 py-4 flex justify-end gap-3",children:[e.jsx("button",{onClick:v,className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-100 transition-colors",children:"Cancel"}),e.jsxs("button",{onClick:F,className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[e.jsx(te,{className:"w-4 h-4"}),o?"Update Post":"Create Post"]})]})]})})]})}export{ce as default};
