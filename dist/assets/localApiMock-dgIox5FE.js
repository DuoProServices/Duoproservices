import"./index-DZ1v8t67.js";const c="duopro_kv_";class r{static async set(e,o){try{const s=c+e,l=JSON.stringify(o);localStorage.setItem(s,l),console.log(`‚úÖ [LocalKV] Saved key: ${e}`)}catch(s){throw console.error(`‚ùå [LocalKV] Error saving key ${e}:`,s),s}}static async get(e){try{const o=c+e,s=localStorage.getItem(o);if(!s)return console.log(`‚ö†Ô∏è [LocalKV] Key not found: ${e}`),null;const l=JSON.parse(s);return console.log(`‚úÖ [LocalKV] Retrieved key: ${e}`),l}catch(o){return console.error(`‚ùå [LocalKV] Error getting key ${e}:`,o),null}}static async del(e){try{const o=c+e;localStorage.removeItem(o),console.log(`‚úÖ [LocalKV] Deleted key: ${e}`)}catch(o){throw console.error(`‚ùå [LocalKV] Error deleting key ${e}:`,o),o}}static async getByPrefix(e){try{const o=c+e,s=[];for(let l=0;l<localStorage.length;l++){const a=localStorage.key(l);if(a&&a.startsWith(o)){const n=localStorage.getItem(a);if(n){const i=JSON.parse(n);s.push({key:a.replace(c,""),value:i})}}}return console.log(`‚úÖ [LocalKV] Found ${s.length} items with prefix: ${e}`),s}catch(o){return console.error(`‚ùå [LocalKV] Error getting by prefix ${e}:`,o),[]}}static async clear(){try{const e=[];for(let o=0;o<localStorage.length;o++){const s=localStorage.key(o);s&&s.startsWith(c)&&e.push(s)}e.forEach(o=>localStorage.removeItem(o)),console.log(`‚úÖ [LocalKV] Cleared ${e.length} items`)}catch(e){throw console.error("‚ùå [LocalKV] Error clearing storage:",e),e}}static async listKeys(){try{const e=[];for(let o=0;o<localStorage.length;o++){const s=localStorage.key(o);s&&s.startsWith(c)&&e.push(s.replace(c,""))}return console.log(`‚úÖ [LocalKV] Found ${e.length} keys`),e}catch(e){return console.error("‚ùå [LocalKV] Error listing keys:",e),[]}}}const u={async getTasks(){console.log("üìã [LocalAPI] Getting tasks...");const e=(await r.getByPrefix("task:")).map(o=>o.value);return console.log(`‚úÖ [LocalAPI] Found ${e.length} tasks`),{success:!0,tasks:e}},async saveTask(t){if(console.log("üíæ [LocalAPI] Saving task:",t.id),!t.id||!t.title)throw new Error("Missing required fields: id or title");return await r.set(`task:${t.id}`,t),console.log("‚úÖ [LocalAPI] Task saved successfully"),{success:!0,message:"Task saved successfully",task:t}},async deleteTask(t){return console.log("üóëÔ∏è [LocalAPI] Deleting task:",t),await r.del(`task:${t}`),console.log("‚úÖ [LocalAPI] Task deleted successfully"),{success:!0,message:"Task deleted successfully"}}},d={async getInvoices(){console.log("üí∞ [LocalAPI] Getting invoices...");const e=(await r.getByPrefix("invoice:")).map(o=>o.value);return console.log(`‚úÖ [LocalAPI] Found ${e.length} invoices`),{success:!0,invoices:e}},async createInvoice(t){if(console.log("üíæ [LocalAPI] Creating invoice:",t.invoiceNumber),!t.invoiceNumber)throw new Error("Missing required field: invoiceNumber");const e={...t,createdAt:t.createdAt||new Date().toISOString(),updatedAt:new Date().toISOString()};return await r.set(`invoice:${t.invoiceNumber}`,e),console.log("‚úÖ [LocalAPI] Invoice created successfully"),{success:!0,invoice:e}},async getInvoice(t){console.log("üí∞ [LocalAPI] Getting invoice:",t);const e=await r.get(`invoice:${t}`);if(!e)throw new Error("Invoice not found");return console.log("‚úÖ [LocalAPI] Invoice found"),{success:!0,invoice:e}},async markAsPaid(t,e){console.log("üí≥ [LocalAPI] Marking invoice as paid:",t);const o=await r.get(`invoice:${t}`);if(!o)throw new Error("Invoice not found");const s={...o,status:"paid",paidAt:new Date().toISOString(),...e,updatedAt:new Date().toISOString()};return await r.set(`invoice:${t}`,s),console.log("‚úÖ [LocalAPI] Invoice marked as paid"),{success:!0,invoice:s}}};export{d as I,u as T};
