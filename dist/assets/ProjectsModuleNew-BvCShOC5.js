import{g as I,r as l,j as e,L as ee,h as se,U as L,a as te,C as ae,i as re,k as le,c as ne,b as E,l as ie,m as oe,t as p,d as ce,f as de}from"./index-DZ1v8t67.js";import{T as w}from"./localApiMock-dgIox5FE.js";import{C as xe}from"./chevron-left-DJ7p48l8.js";/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const me=I("Flag",[["path",{d:"M4 15s1-1 4-1 5 2 8 2 4-1 4-1V3s-1 1-4 1-5-2-8-2-4 1-4 1z",key:"i9b6wo"}],["line",{x1:"4",x2:"4",y1:"22",y2:"15",key:"1cm3nv"}]]);/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ue=I("List",[["line",{x1:"8",x2:"21",y1:"6",y2:"6",key:"7ey8pc"}],["line",{x1:"8",x2:"21",y1:"12",y2:"12",key:"rjfblc"}],["line",{x1:"8",x2:"21",y1:"18",y2:"18",key:"c3b1m8"}],["line",{x1:"3",x2:"3.01",y1:"6",y2:"6",key:"1g7gq3"}],["line",{x1:"3",x2:"3.01",y1:"12",y2:"12",key:"1pjlvk"}],["line",{x1:"3",x2:"3.01",y1:"18",y2:"18",key:"28t2mc"}]]),D=[{id:"1",name:"Veronica Prass",color:"bg-blue-100 text-blue-700"},{id:"2",name:"Jamila Azevedo",color:"bg-purple-100 text-purple-700"},{id:"3",name:"Germana Azevedo",color:"bg-green-100 text-green-700"}];function je(){const[y,$]=l.useState([]),[O,S]=l.useState(!0),[c,C]=l.useState(null),[W,x]=l.useState(!1),[he,J]=l.useState(!1),[j,R]=l.useState("all"),[b,U]=l.useState("all"),[N,z]=l.useState("all"),[m,T]=l.useState("list"),[u,f]=l.useState(new Date),[r,i]=l.useState({title:"",description:"",status:"not-started",priority:"medium",assignedTo:"",dueDate:""});l.useEffect(()=>{v()},[]);const v=async()=>{var s;S(!0);try{const t=await w.getTasks();$(t.tasks||[]),J(!0),console.log(`✅ [ProjectsModule] Loaded ${((s=t.tasks)==null?void 0:s.length)||0} tasks`)}catch(t){console.error("❌ [ProjectsModule] Error loading tasks:",t)}finally{S(!1)}},V=async()=>{try{const s={id:(c==null?void 0:c.id)||`task-${Date.now()}`,...r,createdAt:(c==null?void 0:c.createdAt)||new Date().toISOString(),updatedAt:new Date().toISOString()};await w.saveTask(s),p.success("✅ Task saved successfully"),await v(),x(!1),C(null),i({title:"",description:"",status:"not-started",priority:"medium",assignedTo:"",dueDate:""})}catch(s){console.error("❌ [ProjectsModule] Error saving task:",s),p.error("Failed to save task")}},Y=async s=>{if(confirm("Are you sure you want to delete this task?"))try{await w.deleteTask(s),p.success("✅ Task deleted"),await v()}catch(t){console.error("❌ [ProjectsModule] Error deleting task:",t),p.error("Failed to delete task")}},k=s=>{C(s),i({title:s.title,description:s.description,status:s.status,priority:s.priority,assignedTo:s.assignedTo,dueDate:s.dueDate}),x(!0)},_=s=>{switch(s){case"completed":return"bg-green-100 text-green-800";case"in-progress":return"bg-blue-100 text-blue-800";default:return"bg-gray-100 text-gray-800"}},M=s=>{switch(s){case"high":return"bg-red-100 text-red-800";case"medium":return"bg-yellow-100 text-yellow-800";default:return"bg-green-100 text-green-800"}},B=s=>{switch(s){case"completed":return e.jsx(de,{className:"w-4 h-4"});case"in-progress":return e.jsx(ce,{className:"w-4 h-4"});default:return e.jsx(E,{className:"w-4 h-4"})}},H=()=>y.filter(s=>!(j!=="all"&&s.status!==j||b!=="all"&&s.priority!==b||N!=="all"&&s.assignedTo!==N)),q=()=>{const s={};return y.forEach(t=>{const a=t.assignedTo||"Unassigned";s[a]||(s[a]={total:0,completed:0,inProgress:0,notStarted:0}),s[a].total++,t.status==="completed"?s[a].completed++:t.status==="in-progress"?s[a].inProgress++:s[a].notStarted++}),s},G=()=>{const s=u.getFullYear(),t=u.getMonth(),a=new Date(s,t,1),n=new Date(s,t+1,0),o=a.getDay();return{daysInMonth:n.getDate(),startingDayOfWeek:o,year:s,month:t}},X=s=>{const t=u.getFullYear(),a=u.getMonth(),o=new Date(t,a,s).toISOString().split("T")[0];return y.filter(d=>{var F;return(F=d.dueDate)==null?void 0:F.startsWith(o)})},A=H(),P=q(),{daysInMonth:K,startingDayOfWeek:Q,year:h,month:g}=G();if(O)return e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsxs("div",{className:"text-center",children:[e.jsx(ee,{className:"w-8 h-8 animate-spin text-blue-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Loading tasks..."})]})});const Z=["January","February","March","April","May","June","July","August","September","October","November","December"];return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Project Management"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Manage tasks with calendar view and team stats"})]}),e.jsxs("button",{onClick:()=>x(!0),className:"inline-flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:[e.jsx(se,{className:"w-5 h-5"}),"New Task"]})]}),Object.keys(P).length>0&&e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:Object.entries(P).map(([s,t])=>{const a=t.total>0?Math.round(t.completed/t.total*100):0,n=D.find(o=>o.name===s);return e.jsxs("div",{className:`${(n==null?void 0:n.color)||"bg-gray-100 text-gray-700"} border border-gray-200 rounded-lg p-4`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(L,{className:"w-5 h-5"}),e.jsx("h3",{className:"font-semibold",children:s})]}),e.jsx("span",{className:"text-2xl font-bold",children:t.total})]}),e.jsxs("div",{className:"space-y-1 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Completed:"}),e.jsx("span",{className:"font-medium",children:t.completed})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"In Progress:"}),e.jsx("span",{className:"font-medium",children:t.inProgress})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Not Started:"}),e.jsx("span",{className:"font-medium",children:t.notStarted})]}),e.jsx("div",{className:"mt-2 pt-2 border-t border-current/20",children:e.jsxs("div",{className:"flex justify-between font-semibold",children:[e.jsx("span",{children:"Completion Rate:"}),e.jsxs("span",{children:[a,"%"]})]})})]})]},s)})}),e.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:e.jsxs("div",{className:"flex flex-wrap items-center gap-4",children:[e.jsx(te,{className:"w-5 h-5 text-gray-500"}),e.jsxs("select",{value:j,onChange:s=>R(s.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg text-sm",children:[e.jsx("option",{value:"all",children:"All Statuses"}),e.jsx("option",{value:"not-started",children:"Not Started"}),e.jsx("option",{value:"in-progress",children:"In Progress"}),e.jsx("option",{value:"completed",children:"Completed"})]}),e.jsxs("select",{value:b,onChange:s=>U(s.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg text-sm",children:[e.jsx("option",{value:"all",children:"All Priorities"}),e.jsx("option",{value:"low",children:"Low"}),e.jsx("option",{value:"medium",children:"Medium"}),e.jsx("option",{value:"high",children:"High"})]}),e.jsxs("select",{value:N,onChange:s=>z(s.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg text-sm",children:[e.jsx("option",{value:"all",children:"All Team Members"}),D.map(s=>e.jsx("option",{value:s.name,children:s.name},s.id))]}),e.jsxs("div",{className:"ml-auto flex gap-2",children:[e.jsx("button",{onClick:()=>T("list"),className:`px-3 py-2 rounded-lg text-sm font-medium ${m==="list"?"bg-blue-600 text-white":"bg-gray-100 text-gray-700"}`,children:e.jsx(ue,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>T("calendar"),className:`px-3 py-2 rounded-lg text-sm font-medium ${m==="calendar"?"bg-blue-600 text-white":"bg-gray-100 text-gray-700"}`,children:e.jsx(ae,{className:"w-4 h-4"})})]})]})}),W&&e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:c?"Edit Task":"New Task"}),e.jsx("button",{onClick:()=>x(!1),className:"text-gray-400 hover:text-gray-600",children:e.jsx(re,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("input",{type:"text",value:r.title,onChange:s=>i({...r,title:s.target.value}),className:"w-full px-3 py-2 border rounded-lg",placeholder:"Task title *"}),e.jsx("textarea",{value:r.description,onChange:s=>i({...r,description:s.target.value}),rows:3,className:"w-full px-3 py-2 border rounded-lg",placeholder:"Description"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("select",{value:r.status,onChange:s=>i({...r,status:s.target.value}),className:"px-3 py-2 border rounded-lg",children:[e.jsx("option",{value:"not-started",children:"Not Started"}),e.jsx("option",{value:"in-progress",children:"In Progress"}),e.jsx("option",{value:"completed",children:"Completed"})]}),e.jsxs("select",{value:r.priority,onChange:s=>i({...r,priority:s.target.value}),className:"px-3 py-2 border rounded-lg",children:[e.jsx("option",{value:"low",children:"Low"}),e.jsx("option",{value:"medium",children:"Medium"}),e.jsx("option",{value:"high",children:"High"})]}),e.jsxs("select",{value:r.assignedTo,onChange:s=>i({...r,assignedTo:s.target.value}),className:"px-3 py-2 border rounded-lg",children:[e.jsx("option",{value:"",children:"Select member..."}),D.map(s=>e.jsx("option",{value:s.name,children:s.name},s.id))]}),e.jsx("input",{type:"date",value:r.dueDate,onChange:s=>i({...r,dueDate:s.target.value}),className:"px-3 py-2 border rounded-lg"})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t",children:[e.jsx("button",{onClick:()=>x(!1),className:"px-4 py-2 bg-gray-100 rounded-lg",children:"Cancel"}),e.jsxs("button",{onClick:V,disabled:!r.title,className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg disabled:opacity-50",children:[e.jsx(le,{className:"w-4 h-4"}),"Save"]})]})]})]}),m==="calendar"&&e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("h3",{className:"text-lg font-semibold",children:[Z[g]," ",h]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>f(new Date(h,g-1)),className:"p-2 hover:bg-gray-100 rounded-lg",children:e.jsx(xe,{className:"w-5 h-5"})}),e.jsx("button",{onClick:()=>f(new Date),className:"px-3 py-2 text-sm bg-gray-100 rounded-lg hover:bg-gray-200",children:"Today"}),e.jsx("button",{onClick:()=>f(new Date(h,g+1)),className:"p-2 hover:bg-gray-100 rounded-lg",children:e.jsx(ne,{className:"w-5 h-5"})})]})]}),e.jsxs("div",{className:"grid grid-cols-7 gap-2",children:[["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map(s=>e.jsx("div",{className:"text-center font-semibold text-sm text-gray-600 py-2",children:s},s)),Array.from({length:Q}).map((s,t)=>e.jsx("div",{className:"h-24"},`empty-${t}`)),Array.from({length:K}).map((s,t)=>{const a=t+1,n=X(a),o=new Date().getDate()===a&&new Date().getMonth()===g&&new Date().getFullYear()===h;return e.jsxs("div",{className:`h-24 border rounded-lg p-2 ${o?"bg-blue-50 border-blue-300":"bg-white"}`,children:[e.jsx("div",{className:`text-sm font-medium mb-1 ${o?"text-blue-600":"text-gray-700"}`,children:a}),e.jsxs("div",{className:"space-y-1",children:[n.slice(0,2).map(d=>e.jsx("div",{className:`text-xs px-1.5 py-0.5 rounded ${M(d.priority)} truncate cursor-pointer`,onClick:()=>k(d),title:d.title,children:d.title},d.id)),n.length>2&&e.jsxs("div",{className:"text-xs text-gray-500",children:["+",n.length-2," more"]})]})]},a)})]})]}),m==="list"&&e.jsx("div",{className:"bg-white rounded-lg border border-gray-200",children:A.length===0?e.jsxs("div",{className:"p-12 text-center",children:[e.jsx(E,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"No tasks found"})]}):e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 border-b",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Task"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Priority"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Assigned To"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Due Date"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y",children:A.map(s=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsxs("td",{className:"px-6 py-4",children:[e.jsx("div",{className:"text-sm font-medium",children:s.title}),s.description&&e.jsx("div",{className:"text-sm text-gray-500",children:s.description})]}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("span",{className:`inline-flex items-center gap-1 px-2.5 py-0.5 rounded-full text-xs font-medium ${_(s.status)}`,children:[B(s.status),s.status.replace("-"," ")]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("span",{className:`inline-flex items-center gap-1 px-2.5 py-0.5 rounded-full text-xs font-medium ${M(s.priority)}`,children:[e.jsx(me,{className:"w-3 h-3"}),s.priority]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(L,{className:"w-4 h-4 text-gray-400"}),e.jsx("span",{className:"text-sm",children:s.assignedTo||"-"})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:"text-sm",children:s.dueDate?new Date(s.dueDate).toLocaleDateString():"-"})}),e.jsx("td",{className:"px-6 py-4 text-right",children:e.jsxs("div",{className:"flex items-center justify-end gap-2",children:[e.jsx("button",{onClick:()=>k(s),className:"text-blue-600 hover:text-blue-900",children:e.jsx(ie,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>Y(s.id),className:"text-red-600 hover:text-red-900",children:e.jsx(oe,{className:"w-4 h-4"})})]})})]},s.id))})]})})]})}export{je as default};
